{
  "id": null,
  "title": "Sensor Overview",
  "timezone": "browser",
  "version": 1,
  "refresh": "5s",
  "panels": [
    {
      "type": "timeseries",
      "title": "Kabinentemperatur",
      "id": 1,
      "datasource": {"type":"postgres","uid":"ibsys-postgres"},
      "targets": [
        {
          "refId": "A",
          "datasource": {"type":"postgres","uid":"ibsys-postgres"},
          "format": "time_series",
          "intervalMs": 10000,
            "maxDataPoints": 43200,
          "rawQuery": true,
          "rawSql": "SELECT recorded_at AS time, value FROM sensor_readings WHERE parameter='kabinentemperatur' ORDER BY recorded_at DESC LIMIT 500"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "celsius",
          "min": 15,
          "max": 35,
          "custom": {
            "thresholdsStyle": {
              "mode": "line"
            }
          }
        }, 
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "value"},
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "blue", "value": null},
                    {"color": "blue", "value": 18},
                    {"color": "green", "value": 18.1},
                    {"color": "red", "value": 28}
                  ]
                }
              },
              {
                "id": "custom.thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "green", "value": 18},
                    {"color": "red", "value": 28}
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "showLegend": true
        }, 
        "showPoints": "never",
        "tooltip": {"mode": "single"}
      },
      "gridPos": {"h":8, "w":12, "x":0, "y":0}
    },
    {
      "type": "timeseries",
      "title": "Luftfeuchtigkeit",
      "id": 2,
      "datasource": {"type":"postgres","uid":"ibsys-postgres"},
      "targets": [
  {"refId": "B", "datasource": {"type":"postgres","uid":"ibsys-postgres"}, "format": "time_series", "intervalMs": 10000, "maxDataPoints": 43200, "rawQuery": true, "rawSql": "SELECT recorded_at AS time, value FROM sensor_readings WHERE parameter='luftfeuchtigkeit' ORDER BY recorded_at DESC LIMIT 500"}
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "min": 20,
          "max": 75,
          "custom": {
            "thresholdsStyle": {
              "mode": "line"
            }
          }
        }, 
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "value"},
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "blue", "value": null},
                    {"color": "blue", "value": 30},
                    {"color": "green", "value": 30.1},
                    {"color": "red", "value": 65}
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "showLegend": true
        }
      },
      "gridPos": {"h":8, "w":12, "x":12, "y":0}
    },
    {
      "type": "timeseries",
      "title": "Düsendruck",
      "id": 3,
      "datasource": {"type":"postgres","uid":"ibsys-postgres"},
      "targets": [
  {"refId": "C", "datasource": {"type":"postgres","uid":"ibsys-postgres"}, "format": "time_series", "intervalMs": 10000, "maxDataPoints": 43200, "rawQuery": true, "rawSql": "SELECT recorded_at AS time, value FROM sensor_readings WHERE parameter='duesendruck' ORDER BY recorded_at DESC LIMIT 500"}
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "pressurebar",
          "min": 1.0,
          "max": 4.0,
          "custom": {
            "thresholdsStyle": {
              "mode": "line"
            }
          }
        }, 
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "value"},
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "blue", "value": null},
                    {"color": "blue", "value": 1.8},
                    {"color": "green", "value": 1.81},
                    {"color": "red", "value": 3.2}
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "showLegend": true
        }
      },
      "gridPos": {"h":8, "w":12, "x":0, "y":8}
    },
    {
      "type": "timeseries",
      "title": "Energieverbrauch",
      "id": 4,
      "datasource": {"type":"postgres","uid":"ibsys-postgres"},
      "targets": [
  {"refId": "D", "datasource": {"type":"postgres","uid":"ibsys-postgres"}, "format": "time_series", "intervalMs": 10000, "maxDataPoints": 43200, "rawQuery": true, "rawSql": "SELECT recorded_at AS time, value FROM sensor_readings WHERE parameter='energieverbrauch' ORDER BY recorded_at DESC LIMIT 500"}
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "kwatt",
          "min": 10,
          "max": 30,
          "custom": {
            "thresholdsStyle": {
              "mode": "line"
            }
          }
        }, 
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "value"},
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "blue", "value": null},
                    {"color": "blue", "value": 12},
                    {"color": "green", "value": 12.1},
                    {"color": "red", "value": 28}
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "showLegend": true
        }
      },
      "gridPos": {"h":8, "w":12, "x":12, "y":8}
    },
    {
      "type": "table",
      "title": "Ausgeführte Aktionen (Follow-ups nach 20s Alert)",
      "id": 5,
      "datasource": {"type":"postgres","uid":"ibsys-postgres"},
      "targets": [
  {"refId": "E", "datasource": {"type":"postgres","uid":"ibsys-postgres"}, "rawQuery": true, "format": "table", "rawSql": "SELECT TO_CHAR(created_at, 'HH24:MI:SS') as zeit, alert_title as alert, ROUND(current_value::numeric, 2) as wert, ROUND(threshold::numeric, 2) as schwellenwert, action as aktion FROM alert_actions ORDER BY created_at DESC LIMIT 30"}
      ],
      "options": {
        "showHeader": true,
        "sortBy": [],
        "cellHeight": "auto"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "aktion"},
            "properties": [
              {
                "id": "custom.width",
                "value": 900
              },
              {
                "id": "custom.displayMode",
                "value": "color-text"
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "auto",
                  "wrapText": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {"h":14, "w":24, "x":0, "y":16}
    }
  ],
  "schemaVersion": 38,
  "annotations": {"list": []}
}
